function jobifyMap(){function a(){var a=[];"autofit"!=d.getSetting("center")&&(a=[d.getSetting("center")[0],d.getSetting("center")[1]]),d.getMap().gmap3({map:{options:{scrollwheel:d.getSetting("scrollWheel"),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:"auto"==d.getSetting("zoom")?8:parseFloat(d.getSetting("zoom")),streetViewControl:!1,center:a,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER}}}}),"show"===d.getSetting("showSearch")&&d.getSearchBox().show()}function b(){d.getForm().submit(function(a,b){var c,f=h;f=b&&"update_results"==b.type?e(b.target.children[0]):d.getForm();var g=f.find(":input[name^=search_categories], :input[name^=search_categories]").map(function(){return e(this).val()}).get(),h="",c="",i=f.find(":input[name=search_keywords]"),j=f.find(":input[name=search_location]");i.val()!==i.attr("placeholder")&&(h=i.val()),j.val()!==j.attr("placeholder")&&(c=j.val());var k={search_keywords:h,search_location:c,search_categories:g,action:"jobify_update_map",search_type:d.getSetting("type"),per_page:d.getSetting("perPage")};return xhr=e.ajax({type:"POST",url:jobifySettings.ajaxurl,data:k,dataType:"json",success:function(a){d.getMap().gmap3({clear:{},marker:d.getMarkerDefaults(a)},d.getCenter()),console.log(a),d.hasLoaded=!0}}),!1})}function c(){e(window).height()<600&&(e("#map-canvas-wrap, #jobify-map-canvas").css("height",e(window).height()-parseInt(e(".site-header").outerHeight()+100)),e("#map-canvas-wrap").outerHeight()<300&&e(".live-map").hide())}var d={},e=jQuery;return d.init=function(f){d.settings=f,d.hasLoaded=!1,c(),a(),b(),d.getForm().trigger("submit"),e(".job_listings, .resumes").on("update_results",function(a){d.getForm().trigger("submit",[a])}),e(window).resize(function(){c()})},d.getSetting=function(a){return d.settings[a]},d.getWidgetType=function(){return d.getSetting("widget").replace(".","")},d.getMap=function(){return e(d.getSetting("canvas"))},d.getSearchBox=function(){return e(d.getSetting("widget")).find(e(".map-filter"))},d.getForm=function(){return d.getSearchBox().find("form")},d.getCenter=function(){var a=d.getSetting("center");return!d.hasLoaded&&Array.isArray(a)?"":"autofit"},d.getMarkerDefaults=function(a){return{values:a,options:{draggable:!1,animation:google.maps.Animation.DROP},events:{mouseover:function(a,b,c){e(this).gmap3({clear:"overlay"},{overlay:{latLng:a.getPosition(),options:{content:'<div class="map-tooltip">'+c.data.title+"</div>",offset:{x:parseInt(-50),y:0}}}})},mouseout:function(){e(this).gmap3({clear:"overlay"})},click:function(a,b,c){window.location.href=c.data.permalink}},cluster:{radius:d.getSetting("clusterRadius"),events:{click:function(a,b,c){var f=e(this).gmap3("get");f.getZoom()>10?e.magnificPopup.open({items:{src:'<div class="modal"><h2 class="modal-title">'+d.getSetting("inString").replace("%s",c.data.markers.length)+'</h2>\n\n											<div class="application-content"><ul class="cluster-list"><li>'+e.map(c.data.markers,function(a){return'<a href="'+a.data.permalink+'">'+a.data.title+"</a>"}).join("</li><li>")+"</li></ul></div></div>",type:"inline"}}):(f.panTo(c.data.latLng),f.setZoom(f.getZoom()+1))}},0:{content:"<div class='cluster cluster-"+d.getSetting("type")+"' style='background-color:"+d.getSetting("clusterColor")+"; border-color:"+d.getSetting("clusterColor")+"'>CLUSTER_COUNT</div>",width:40,height:40}}}},d}
//# sourceMappingURL=jobify-map.min.map